<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../css/form.css">
    <title>PMJAY | Feedback Form</title>
</head>

<body>
    <div class="container">
        <div class="nav_expanded">
            <img src="https://0.academia-photos.com/61780733/19658868/19531766/s200_sna.jharkhand.jpg" alt=""
                class="mainLogo">
            <a class="about" href="../index.html">
                <img src="../Assets/img/about.png" alt="" class="aboutImg">
                <p>About</p>
            </a>
            <a class="feedback" href="../view/form.html">
                <img src="../Assets/img/feedback.png" alt="" class="feedbackImg">
                <p>Feedback</p>
            </a>
            <a class="tables" href="../view/table.html">
                <img src="../Assets/img/table.png" alt="" class="tablesImg">
                <p>Tables</p>
            </a>
            <a class="tables" href="../view/download.html">
                <img src="../Assets/img/save.png" alt="" class="saveImg">
                <p>Downloads</p>
            </a>
            <a class="tables" href="../view/Achievements.html">
                <img src="../Assets/img/save.png" alt="" class="saveImg">
                <p>Success stories</p>
            </a>
            <a class="save" href="../view/download.html">
                <img src="../Assets/img/save.png" alt="" class="saveImg">
                <p>Events and Workshops</p>
            </a>
            <img src="../Assets/img/sub_logo.png" alt="" class="logo3">
            <p class="govt">Govt. of Jharkhand</p>
            <img src="../Assets/img/ham.png" alt="" srcset="" class="ham">
        </div>
        <div class="headf">
            <h1>Feedback Form</h1>
            <div class="form"></br>
                <form id="formElem">
                    <p id="message"></p>
                    <br>
                    <input class="f2" type="text1" name="name" value="" placeholder="Name" required>
                    <select name="gender" id="sub" placeholder="Gender" required>
                        <option value="Gender">Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select><br><br><br>
                    <input class="f2" type="text1" name="phone" value="" placeholder="Phone Number" required>

                    <input class="f2 nice" type="text2" name="email" value="" placeholder="Email"><br><br>

                    <br>
                    <input class="f1" type="text" name="district" value="" placeholder="District" required><br>
                    <br>

                    <br>
                    <textarea class="f1" type="textarea" name="body" value="" placeholder="Body"></textarea>

                    <br>

                    <br>
                    <input class="button3 submit" type="submit" value="Submit">
                </form>
            </div>
        </div>
    </div>
    <div class="header">
        <img src="../Assets/img/ham.png" alt="" srcset="" class="bam">
        <img src="https://0.academia-photos.com/61780733/19658868/19531766/s200_sna.jharkhand.jpg" alt=""
            class="mainLogob">
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TimelineMax.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/plugins/CSSPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenLite.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js" sync></script>

    <script>
        const tables = document.querySelector('.tables');
    const tablesImg = document.querySelector('.tablesImg');
    tables.addEventListener("mouseover", ()=>{
        
        tablesImg.src = "../Assets/img/tables_pink.png";
    })
    tables.addEventListener("mouseout", ()=>{
        tablesImg.src = "../Assets/img/table.png";
    })
    const about = document.querySelector('.about');
    const aboutImg = document.querySelector('.aboutImg');
    about.addEventListener("mouseover", ()=>{
        aboutImg.src = "../Assets/img/about_pink.png";
    })
    about.addEventListener("mouseout", ()=>{
        aboutImg.src = "../Assets/img/about.png";
    })
    const feed = document.querySelector('.feedback');
    const feedbackImg = document.querySelector('.feedbackImg');
    feed.addEventListener("mouseover", ()=>{
        feedbackImg.src = "../Assets/img/feedback_pink.png";
    })
    feed.addEventListener("mouseout", ()=>{
        feedbackImg.src = "../Assets/img/feedback.png";
    })

    const save = document.querySelector('.save');
    const saveImg = document.querySelector('.saveImg');
    save.addEventListener("mouseover", ()=>{
        setTimeout(function() {
            saveImg.src = "../Assets/img/save_pink.png";
        }, 170);
        
    })
    save.addEventListener("mouseout", ()=>{
        saveImg.src = "../Assets/img/save.png";
    })

    const ham = document.querySelector(".bam");
    const navExp = document.querySelector(".nav_expanded");
    const container = document.querySelector(".container");
    const logo2 = document.querySelector(".logo2");
    const logo3 = document.querySelector(".logo3");
    const govt = document.querySelector(".govt");
    let i = 0;
    ham.addEventListener("click" , okay);
    const t1 = new TimelineLite();
    function okay(){
        i++;
        if(i%2 == 0){
            about.style.display = "none";
            feed.style.display = "none";
            tables.style.display = "none";
            save.style.display = "none";
            logo2.style.display = "none";
            logo3.style.display = "none";
            govt.style.display = "none";
            container.style.gridTemplateRows = "55px auto";
            TweenLite.fromTo(navExp, 1 , {
                width: "100%"
            },{
                width: "0"
            });
            TweenLite.fromTo(about, 0.5, {
                opacity: "1"
            },{
                opacity: "0"
            })
            TweenLite.fromTo(feed, 0.5, {
                opacity: "1"
            },{
                opacity: "0"
            })
            TweenLite.fromTo(tables, 0.5, {
                opacity: "1"
            },{
                opacity: "0"
            })
            TweenLite.fromTo(save, 0.5, {
                opacity: "1"
            },{
                opacity: "0"
            })
            logo2.style.opacity = "0";
            logo2.style.display = "none";
        }
        else{
            TweenLite.fromTo(about, 0.1, {
                opacity: "0",
                display: "none"
            },{
                opacity: "1",
                display: "block"
            })
            TweenLite.fromTo(feed, 0.1, {
                opacity: "0",
                display: "none"
            },{
                opacity: "1",
                display: "block"
            })
            TweenLite.fromTo(tables, 0.1, {
                opacity: "0",
                display: "none"
            },{
                opacity: "1",
                display: "block"
            })
            TweenLite.fromTo(save, 0.1, {
                opacity: "0",
                display: "none"
            },{
                opacity: "1",
                display: "block"
            })
            logo2.style.display = "block";
            logo3.style.display = "block";
            govt.style.display = "block";
            container.style.gridTemplateRows = "100%";
            navExp.style.gridTemplateRows = "12% 12% 12% 12% 20% 20% 5%";
            t1.fromTo(navExp, 1 , {
                width: "0"
            },{
                width: "100%"
            })
            .fromTo(logo2, 0.1, {
                opacity: "0",
            },{
                opacity: "1",
            })
            .fromTo(logo3, 0.1, {
                opacity: "0",
            },{
                opacity: "1",
            })
            .fromTo(govt, 0.1, {
                opacity: "0",
            },{
                opacity: "1",
            })
        }
    }
        $(document).ready(function () {
            ca=false;
            ce=false;
            cp=false;
            $('.submit').click(function (e) {
                e.preventDefault();

                //Email validation
                if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(formElem.email.value)) {
                    ce = true;
                } else {
                    message.innerHTML = "Please enter a valid email"
                    ce=false;
                }

                //phone validation
                var phoneno = /^[789]\d{9}$/;
                if (formElem.phone.value.match(phoneno)) {
                    cp = true;
                } else {
                    message.innerHTML = "Please enter a valid phone number"
                    cp=false;
                }
                if (formElem.name.value == "" ||
                    formElem.gender.value == "" ||
                    formElem.phone.value == "" ||
                    formElem.email.value == "" ||
                    formElem.body.value == "" ||
                    formElem.district.value == "") {
                    message.innerHTML = 'All fields are required'
                    ca = false;
                } else {
                    ca = true;
                }

                let formData = new FormData(formElem);

                // for (var value of formData.values()) {
                //     console.log(value);
                // }

                var object = {};
                formData.forEach(function (value, key) {
                    console.log(value)
                    object[key] = value;
                });
                console.log(JSON.stringify(object))

                console.log(ca,cp,ce);
                if (ca & cp & ce) {
                    fetch('https://pmjay.herokuapp.com/feedback/', {
                        method: 'POST',
                        crossDomain: true,
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify(object)
                    }).then(
                        response => response.json()
                    ).then(
                        success => {
                            document.getElementById('message').innerHTML = 'Feedback Saved!'
                            document.getElementById('message').style.color = "green"
                            console.log(success)
														for (let elem of $("#formElem")) {
																		elem.reset()
														}
                        }
                    ).catch(
                        error => {
                            document.getElementById('message').innerHTML = 'Feedback not saved, please try again'
                            document.getElementById('message').style.color = "red"
                            console.log(error)
                        }
                    );
                }


            })
        })
    </script>
</body>

</html>
